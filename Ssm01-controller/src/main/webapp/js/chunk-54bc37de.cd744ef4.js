(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54bc37de"],{"268f":function(e,t,a){e.exports=a("fde4")},"32a6":function(e,t,a){var r=a("241e"),o=a("c3a1");a("ce7e")("keys",function(){return function(e){return o(r(e))}})},"3b88":function(e,t,a){"use strict";var r=a("5a30"),o=a.n(r);o.a},"454f":function(e,t,a){a("46a7");var r=a("584a").Object;e.exports=function(e,t,a){return r.defineProperty(e,t,a)}},"469f":function(e,t,a){a("6c1c"),a("1654"),e.exports=a("7d7b")},"46a7":function(e,t,a){var r=a("63b6");r(r.S+r.F*!a("8e60"),"Object",{defineProperty:a("d9f6").f})},"5a30":function(e,t,a){},"5d73":function(e,t,a){e.exports=a("469f")},"7d7b":function(e,t,a){var r=a("e4ae"),o=a("7cd6");e.exports=a("584a").getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},"85f2":function(e,t,a){e.exports=a("454f")},"8aae":function(e,t,a){a("32a6"),e.exports=a("584a").Object.keys},a21f:function(e,t,a){var r=a("584a"),o=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},a4bb:function(e,t,a){e.exports=a("8aae")},b49f:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 考试管理")]),a("el-breadcrumb-item",[e._v("添加考试")])],1)],1),a("div",{staticClass:"container",attrs:{align:"center"}},[a("div",{staticClass:"text-left mb-5"},[a("el-steps",{attrs:{active:e.active,"finish-status":"success"}},[a("el-step",{attrs:{title:"设置基本信息"}}),a("el-step",{attrs:{title:"选择试卷"}}),a("el-step",{attrs:{title:"选择应试者"}}),a("el-step",{attrs:{title:"选择阅卷官"}})],1)],1),a("div",{staticClass:"form-box "},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"75px",inline:"true","label-position":"labelPosition"}},[0===e.active?a("div",[a("el-form-item",{attrs:{label:"考试日期"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["12:00:00","12:00:00"],"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.dateInfo,callback:function(t){e.dateInfo=t},expression:"dateInfo"}})],1),a("el-form-item",{attrs:{label:"考试标题"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",autosize:"autosize"},model:{value:e.form.examName,callback:function(t){e.$set(e.form,"examName",t)},expression:"form.examName"}})],1),a("el-form-item",{attrs:{label:"考试时长"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.form.examTimeLength,callback:function(t){e.$set(e.form,"examTimeLength",t)},expression:"form.examTimeLength"}},[a("el-option",{attrs:{value:"60",label:"60mins"}}),a("el-option",{attrs:{value:"90",label:"90mins"}}),a("el-option",{attrs:{value:"120",label:"120mins"}})],1)],1),a("br")],1):e._e(),1===e.active?a("div",[a("el-form-item",{attrs:{label:"选择试卷"}},[a("el-button",{on:{click:function(t){e.modal1=!0}}},[e._v("选择试卷")])],1),a("span",{staticClass:"text-primary text-sm-center paper-name"},[e._v(e._s(e.selectedPaper.paperName))]),a("Modal",{attrs:{title:"试卷选择"},on:{"on-ok":e.modal1Ok,"on-cancel":e.cancel},model:{value:e.modal1,callback:function(t){e.modal1=t},expression:"modal1"}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText1,callback:function(t){e.filterText1=t},expression:"filterText1"}}),a("el-tree",{ref:"tree1",staticClass:"filter-tree",attrs:{data:e.paperTree,props:e.defaultProps,"default-expand-all":"","filter-node-method":e.filterNode},on:{"node-click":e.choosePaper}})],1)],1):e._e(),2===e.active?a("div",[a("el-form-item",[a("el-button",{on:{click:function(t){e.modal2=!0}}},[e._v("选择应试人员")])],1),a("span",{staticClass:"text-primary text-sm-center paper-name"}),a("Modal",{attrs:{title:"应试人员选择"},on:{"on-ok":e.modal2Ok,"on-cancel":e.cancel},model:{value:e.modal2,callback:function(t){e.modal2=t},expression:"modal2"}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText2,callback:function(t){e.filterText2=t},expression:"filterText2"}}),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",size:"mini"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"applicantName",label:"姓名",width:"220"}}),a("el-table-column",{attrs:{prop:"applicantPhone",label:"手机","show-overflow-tooltip":""}})],1),a("el-pagination",{attrs:{small:"",background:"","page-size":e.pageInfo.pageSize,"current-page":e.pageInfo.startPage,layout:"prev, pager, next",total:e.applicantList.total},on:{"update:currentPage":function(t){e.$set(e.pageInfo,"startPage",t)},"current-change":e.handleCurrentChange}})],1)],1):e._e(),3===e.active?a("div",[a("el-form-item",[a("el-button",{on:{click:function(t){e.modal2=!0}}},[e._v("选择阅卷官")])],1),a("span",{staticClass:"text-primary text-sm-center paper-name"},[e._v(e._s(e.selectedCorrector.userName))]),a("Modal",{attrs:{title:"阅卷官选择"},on:{"on-ok":e.modal2Ok,"on-cancel":e.cancel},model:{value:e.modal2,callback:function(t){e.modal2=t},expression:"modal2"}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText2,callback:function(t){e.filterText2=t},expression:"filterText2"}}),a("el-tree",{ref:"tree2",staticClass:"filter-tree",attrs:{data:e.correctorTree,props:e.defaultProps,"filter-node-method":e.filterNode},on:{"node-click":e.chooseCorrector}})],1)],1):e._e(),4===e.active?a("div",[a("el-form-item",[a("el-button",{on:{click:function(t){e.modal3=!0}}},[e._v("选择公司")])],1),a("span",{staticClass:"text-primary text-sm-center paper-name"},[e._v(e._s(e.selectedCompany.companyName))]),a("Modal",{attrs:{title:"公司选择"},on:{"on-ok":e.modal3Ok,"on-cancel":e.cancel},model:{value:e.modal3,callback:function(t){e.modal3=t},expression:"modal3"}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText3,callback:function(t){e.filterText3=t},expression:"filterText3"}}),a("el-tree",{ref:"tree3",staticClass:"filter-tree",attrs:{data:e.companyTree,props:e.defaultProps,"filter-node-method":e.filterNode},on:{"node-click":e.chooseCompany}})],1)],1):e._e(),1==e.active||2==e.active||3==e.active||4==e.active?a("el-button",{staticStyle:{"margin-top":"12px"},attrs:{id:"pre"},on:{click:e.prev}},[e._v("上一步")]):e._e(),0==e.active||1==e.active||2==e.active||3==e.active?a("el-button",{staticStyle:{"margin-top":"12px"},attrs:{id:"next"},on:{click:e.next}},[e._v("下一步")]):e._e(),4==e.active?a("el-button",{staticStyle:{"margin-top":"12px"},attrs:{id:"finish"},on:{click:e.addExam}},[e._v("提交")]):e._e()],1)],1)])])},o=[],n=a("5d73"),l=a.n(n),i=a("f499"),c=a.n(i),s=a("cebc"),p=a("2f62"),d=a("da9a"),u={name:"AddExam",data:function(){return{fullscreenLoading:!1,active:0,modal1:!1,modal2:!1,modal3:!1,tableData:[],selectedNode:{},selectedPaper:{},selectedApplicant:[],selectedCorrector:{},selectedCompany:{},form:{examName:"",examStartDate:"",examEndDate:"",examTimeLength:"60",paperId:"",userId:"",companyId:0},applicantId:"",filterText1:"",filterText2:"",filterText3:"",paperTree:[],correctorTree:[],companyTree:[],defaultProps:{children:"children",label:"label"},pageInfo:{startPage:1,pageSize:10},dateInfo:""}},computed:Object(s["a"])({},Object(p["d"])(["papersByTypeList","companyList","applicantList"])),components:{VueCropper:d["a"]},watch:{filterText1:function(e){this.$refs.tree1.filter(e)},filterText2:function(e){this.$refs.tree2.filter(e)},filterText3:function(e){this.$refs.tree3.filter(e)}},mounted:function(){this.selectedApplicant.length=0,this.selectedApplicant=[]},created:function(){this.loadPapers(),this.loadCompanyList(),this.loadApplicantList()},methods:Object(s["a"])({},Object(p["b"])(["loadPaperByType","loadCompanies","loadApplicants","addExamInfo"]),{openFullScreen:function(){},addExam:function(){var e=this,t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.form.examStartDate=this.dateInfo[0],this.form.examEndDate=this.dateInfo[1],this.addExamInfo({requestExam:"["+c()(this.form)+"]",idArray:c()(this.selectedApplicant)}).then(function(a){a?(t.close(),e.$Message.success("发布考试成功")):(t.close(),e.$Message.error("发布考试失败"))})},loadPapers:function(){var e=this;this.loadPaperByType().then(function(){var t=!0,a=!1,r=void 0;try{for(var o,n=l()(e.papersByTypeList);!(t=(o=n.next()).done);t=!0){var i=o.value,c={id:i.typeId,label:i.typeName,children:[]},s=!0,p=!1,d=void 0;try{for(var u,f=l()(i.paperList);!(s=(u=f.next()).done);s=!0){var m=u.value,h={id:m.paperId,label:m.paperName};c.children.push(h)}}catch(v){p=!0,d=v}finally{try{s||null==f.return||f.return()}finally{if(p)throw d}}e.paperTree.push(c)}}catch(v){a=!0,r=v}finally{try{t||null==n.return||n.return()}finally{if(a)throw r}}})},loadCompanyList:function(){var e=this;this.loadCompanies().then(function(){var t=!0,a=!1,r=void 0;try{for(var o,n=l()(e.companyList);!(t=(o=n.next()).done);t=!0){var i=o.value,c={id:i.companyId,label:i.companyName,children:[]},s=!0,p=!1,d=void 0;try{for(var u,f=l()(i.departmentList);!(s=(u=f.next()).done);s=!0){var m=u.value,h={id:m.departmentId,label:m.departmentName,children:[]},v=!0,b=!1,y=void 0;try{for(var x,g=l()(m.userList);!(v=(x=g.next()).done);v=!0){var C=x.value,k={id:C.userId,label:C.userName};h.children.push(k)}}catch(S){b=!0,y=S}finally{try{v||null==g.return||g.return()}finally{if(b)throw y}}c.children.push(h)}}catch(S){p=!0,d=S}finally{try{s||null==f.return||f.return()}finally{if(p)throw d}}e.correctorTree.push(c)}}catch(S){a=!0,r=S}finally{try{t||null==n.return||n.return()}finally{if(a)throw r}}var T=!0,N=!1,I=void 0;try{for(var O,w=l()(e.companyList);!(T=(O=w.next()).done);T=!0){var B=O.value,D={id:B.companyId,label:B.companyName};e.companyTree.push(D)}}catch(S){N=!0,I=S}finally{try{T||null==w.return||w.return()}finally{if(N)throw I}}})},loadApplicantList:function(){var e=this;this.loadApplicants(this.pageInfo).then(function(){e.tableData=e.applicantList.list,console.log(e.tableData)})},handleCurrentChange:function(e){this.pageInfo.startPage=e,this.loadApplicantList()},choosePaper:function(e){this.selectedNode={paperId:e.id,paperName:e.label}},handleSelectionChange:function(e){this.selectedApplicant.length=0,this.selectedApplicant=[];var t=!0,a=!1,r=void 0;try{for(var o,n=l()(e);!(t=(o=n.next()).done);t=!0){var i=o.value;this.selectedApplicant.push(i.applicantId)}}catch(c){a=!0,r=c}finally{try{t||null==n.return||n.return()}finally{if(a)throw r}}},chooseCorrector:function(e){this.selectedNode={userId:e.id,userName:e.label}},chooseCompany:function(e){this.selectedNode={companyId:e.id,companyName:e.label}},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},prev:function(){--this.active,this.active<0&&(this.active=0)},next:function(){this.active++>3&&(this.active=0)},modal1Ok:function(){this.selectedPaper=this.selectedNode,this.form.paperId=this.selectedPaper.paperId},cancel:function(){this.selectedNode={}},modal3Ok:function(){this.selectedCompany=this.selectedNode,this.form.companyId=this.selectedCompany.companyId},modal2Ok:function(){this.selectedCorrector=this.selectedNode,this.form.userId=this.selectedCorrector.userId}})},f=u,m=(a("3b88"),a("2877")),h=Object(m["a"])(f,r,o,!1,null,"96d297ce",null);h.options.__file="AddExam.vue";t["default"]=h.exports},bf90:function(e,t,a){var r=a("36c3"),o=a("bf0b").f;a("ce7e")("getOwnPropertyDescriptor",function(){return function(e,t){return o(r(e),t)}})},ce7e:function(e,t,a){var r=a("63b6"),o=a("584a"),n=a("294c");e.exports=function(e,t){var a=(o.Object||{})[e]||Object[e],l={};l[e]=t(a),r(r.S+r.F*n(function(){a(1)}),"Object",l)}},cebc:function(e,t,a){"use strict";var r=a("268f"),o=a.n(r),n=a("e265"),l=a.n(n),i=a("a4bb"),c=a.n(i),s=a("85f2"),p=a.n(s);function d(e,t,a){return t in e?p()(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},r=c()(a);"function"===typeof l.a&&(r=r.concat(l()(a).filter(function(e){return o()(a,e).enumerable}))),r.forEach(function(t){d(e,t,a[t])})}return e}a.d(t,"a",function(){return u})},da9a:function(e,t,a){"use strict";var r=a("bab4"),o=a.n(r);a("6107");t["a"]={render(e){return e("div",{style:this.containerStyle},[e("img",{ref:"img",attrs:{src:this.src,alt:this.alt||"image",style:"max-width: 100%"},style:this.imgStyle})])},props:{containerStyle:Object,src:{type:String,default:""},alt:String,imgStyle:Object,viewMode:Number,dragMode:String,aspectRatio:Number,data:Object,preview:[String,Array,Element,NodeList],responsive:{type:Boolean,default:!0},restore:{type:Boolean,default:!0},checkCrossOrigin:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},guides:{type:Boolean,default:!0},center:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0},background:{type:Boolean,default:!0},autoCrop:{type:Boolean,default:!0},autoCropArea:Number,movable:{type:Boolean,default:!0},rotatable:{type:Boolean,default:!0},scalable:{type:Boolean,default:!0},zoomable:{type:Boolean,default:!0},zoomOnTouch:{type:Boolean,default:!0},zoomOnWheel:{type:Boolean,default:!0},wheelZoomRatio:Number,cropBoxMovable:{type:Boolean,default:!0},cropBoxResizable:{type:Boolean,default:!0},toggleDragModeOnDblclick:{type:Boolean,default:!0},minCanvasWidth:Number,minCanvasHeight:Number,minCropBoxWidth:Number,minCropBoxHeight:Number,minContainerWidth:Number,minContainerHeight:Number,ready:Function,cropstart:Function,cropmove:Function,cropend:Function,crop:Function,zoom:Function},mounted(){const{containerStyle:e,src:t,alt:a,imgStyle:r,...n}=this.$options.props,l={};for(const o in n)void 0!==this[o]&&(l[o]=this[o]);this.cropper=new o.a(this.$refs.img,l)},methods:{reset(){return this.cropper.reset()},clear(){return this.cropper.clear()},initCrop(){return this.cropper.crop()},replace(e,t=!1){return this.cropper.replace(e,t)},enable(){return this.cropper.enable()},disable(){return this.cropper.disable()},destroy(){return this.cropper.destroy()},move(e,t){return this.cropper.move(e,t)},moveTo(e,t=e){return this.cropper.moveTo(e,t)},relativeZoom(e,t){return this.cropper.zoom(e,t)},zoomTo(e,t){return this.cropper.zoomTo(e,t)},rotate(e){return this.cropper.rotate(e)},rotateTo(e){return this.cropper.rotateTo(e)},scaleX(e){return this.cropper.scaleX(e)},scaleY(e){return this.cropper.scaleY(e)},scale(e,t=e){return this.cropper.scale(e,t)},getData(e=!1){return this.cropper.getData(e)},setData(e){return this.cropper.setData(e)},getContainerData(){return this.cropper.getContainerData()},getImageData(){return this.cropper.getImageData()},getCanvasData(){return this.cropper.getCanvasData()},setCanvasData(e){return this.cropper.setCanvasData(e)},getCropBoxData(){return this.cropper.getCropBoxData()},setCropBoxData(e){return this.cropper.setCropBoxData(e)},getCroppedCanvas(e={}){return this.cropper.getCroppedCanvas(e)},setAspectRatio(e){return this.cropper.setAspectRatio(e)},setDragMode(e){return this.cropper.setDragMode(e)}}}},e265:function(e,t,a){e.exports=a("ed33")},ed33:function(e,t,a){a("014b"),e.exports=a("584a").Object.getOwnPropertySymbols},f499:function(e,t,a){e.exports=a("a21f")},fde4:function(e,t,a){a("bf90");var r=a("584a").Object;e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)}}}]);