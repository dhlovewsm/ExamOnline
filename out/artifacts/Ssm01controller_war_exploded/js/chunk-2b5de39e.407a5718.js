(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b5de39e"],{"0f26":function(e,t,s){},"268f":function(e,t,s){e.exports=s("fde4")},2694:function(e,t,s){"use strict";var n=s("0f26"),a=s.n(n);a.a},"32a6":function(e,t,s){var n=s("241e"),a=s("c3a1");s("ce7e")("keys",function(){return function(e){return a(n(e))}})},"454f":function(e,t,s){s("46a7");var n=s("584a").Object;e.exports=function(e,t,s){return n.defineProperty(e,t,s)}},"469f":function(e,t,s){s("6c1c"),s("1654"),e.exports=s("7d7b")},"46a7":function(e,t,s){var n=s("63b6");n(n.S+n.F*!s("8e60"),"Object",{defineProperty:s("d9f6").f})},"5d73":function(e,t,s){e.exports=s("469f")},"7d7b":function(e,t,s){var n=s("e4ae"),a=s("7cd6");e.exports=s("584a").getIterator=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},"85f2":function(e,t,s){e.exports=s("454f")},"8aae":function(e,t,s){s("32a6"),e.exports=s("584a").Object.keys},a21f:function(e,t,s){var n=s("584a"),a=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}},a4bb:function(e,t,s){e.exports=s("8aae")},bf90:function(e,t,s){var n=s("36c3"),a=s("bf0b").f;s("ce7e")("getOwnPropertyDescriptor",function(){return function(e,t){return a(n(e),t)}})},ccb6:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"table"},[s("div",{staticClass:"crumbs"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",[s("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 考试中心")])],1)],1),s("div",{staticClass:"container"},[s("div",{staticClass:"handle-box"},[s("el-date-picker",{attrs:{type:"date",placeholder:"筛选日期"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}}),s("el-input",{staticClass:"handle-input ml-2",attrs:{placeholder:"筛选关键词"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}}),s("el-button",{staticClass:"ml-2",attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("搜索")]),e._v("   \n        ")],1),s("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"","row-class-name":e.tableRowClassName,"default-sort":{prop:"ExamCreateDate",order:"descending"}},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),s("el-table-column",{attrs:{prop:"examName",label:"考试标题"}}),s("el-table-column",{attrs:{prop:"examStartDate",label:"开始时间",width:"120"}}),s("el-table-column",{attrs:{prop:"examEndDate",label:"截止时间",width:"120"}}),s("el-table-column",{attrs:{prop:"examTimeLength",label:"考试时长（min）",width:"120"}}),s("el-table-column",{attrs:{prop:"status",label:"状态",width:"120"}}),s("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(s){e.handleEdit(t.$index,t.row)}}},[e._v("进行评阅")])]}}])})],1),s("div",{staticClass:"handle-box",attrs:{align:"left"}},[s("br"),s("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"delete"},on:{click:e.delAll}},[e._v("批量删除")])],1),s("div",{staticClass:"pagination"},[s("el-pagination",{attrs:{background:"","page-size":e.pageSize,"current-page":e.startPage,layout:"prev, pager, next",total:e.examList.total},on:{"update:currentPage":function(t){e.startPage=t},"current-change":e.handleCurrentChange}})],1)],1),s("el-dialog",{attrs:{align:"center",title:"本场考试试卷",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[s("div",{staticClass:"container"},[s("div",{staticClass:"handle-box float-left"},[s("el-input",{staticClass:"handle-input ml-2",staticStyle:{width:"100px"},attrs:{placeholder:"筛选关键词"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}}),s("el-button",{staticClass:"ml-2",attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("搜索")]),e._v("   \n            ")],1),s("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.applicantData,border:""},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),s("el-table-column",{attrs:{prop:"applicant.applicantName",label:"考生姓名",width:"142"}}),s("el-table-column",{attrs:{prop:"applicantExamScore",label:"目前分数",width:"120"}}),s("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(s){e.toMark(t.$index,t.row)}}},[e._v("批改试卷")])]}}])})],1),s("div",{staticClass:"handle-box",attrs:{align:"left"}},[s("br"),s("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"delete"},on:{click:e.delAll}},[e._v("批量删除")])],1),s("div",{staticClass:"pagination"},[s("el-pagination",{attrs:{background:"","page-size":e.pageSize,"current-page":e.startPage,layout:"prev, pager, next",total:e.examList.total},on:{"update:currentPage":function(t){e.startPage=t},"current-change":e.handleCurrentChange}})],1)],1)]),s("el-dialog",{attrs:{align:"center",title:"试卷",visible:e.correctVisible,width:"40%"},on:{"update:visible":function(t){e.correctVisible=t}}},[s("div",{staticClass:"text-left"},[s("div",{staticClass:"questions-body"},[this.paperQuestions.singleList.length>0?s("div",{staticClass:"single-questions"},[s("h4",[e._v("单选题")]),e._l(this.paperQuestions.singleList,function(t,n){return s("div",[s("h5",{staticClass:"question-title"},[e._v(e._s(n+1)+"."+e._s(t.question.questionText)),s("span",{staticClass:"ml-2 score"},[e._v(e._s(e.paperAnswer[n].questionScore)+"分")]),0===e.paperAnswer[n].questionScore?s("i",{staticClass:"el-icon-close text-danger"}):e._e(),0!==e.paperAnswer[n].questionScore?s("i",{staticClass:"el-icon-check text-success"}):e._e()]),s("el-radio-group",{attrs:{disabled:""},model:{value:e.paperAnswer[n].paperUserAnswer,callback:function(t){e.$set(e.paperAnswer[n],"paperUserAnswer",t)},expression:"paperAnswer[index].paperUserAnswer"}},e._l(e.splitOption(t.question.questionOption),function(t){return s("div",{staticClass:"mb-2"},[s("el-radio",{attrs:{label:t}},[e._v(e._s(t))])],1)}),0)],1)})],2):e._e(),this.paperQuestions.multipleList.length>0?s("div",{staticClass:"multiple-questions"},[s("h4",[e._v("多选题")]),e._l(this.paperQuestions.multipleList,function(t,n){return s("div",[s("h5",{staticClass:"question-title"},[e._v(e._s(e.paperQuestions.singleList.length+n+1)+"."+e._s(t.question.questionText)),s("span",{staticClass:"ml-2 score"},[e._v(e._s(e.paperAnswer[e.paperQuestions.singleList.length+n].questionScore)+"分 ")]),0===e.paperAnswer[e.paperQuestions.singleList.length+n].questionScore?s("i",{staticClass:"el-icon-close text-danger"}):e._e(),0!==e.paperAnswer[e.paperQuestions.singleList.length+n].questionScore?s("i",{staticClass:"el-icon-check text-success"}):e._e()]),s("el-checkbox-group",{attrs:{disabled:""},model:{value:e.paperAnswer[e.paperQuestions.singleList.length+n].paperUserAnswer,callback:function(t){e.$set(e.paperAnswer[e.paperQuestions.singleList.length+n],"paperUserAnswer",t)},expression:"paperAnswer[paperQuestions.singleList.length+index].paperUserAnswer"}},e._l(e.splitOption(t.question.questionOption),function(e){return s("div",[s("el-checkbox",{attrs:{label:e}})],1)}),0)],1)})],2):e._e(),this.paperQuestions.judgementList.length>0?s("div",{staticClass:"judgement-questions"},[s("h4",[e._v("判断题")]),e._l(this.paperQuestions.judgementList,function(t,n){return s("div",[s("h5",{staticClass:"judgement-title"},[e._v(e._s(e.paperQuestions.singleList.length+e.paperQuestions.multipleList.length+n+1)+"."+e._s(t.question.questionText)),s("span",{staticClass:"ml-2 score"},[e._v(e._s(e.paperAnswer[e.paperQuestions.singleList.length+e.paperQuestions.multipleList.length+n].questionScore)+"分")]),0===e.paperAnswer[e.paperQuestions.singleList.length+e.paperQuestions.multipleList.length+n].questionScore?s("i",{staticClass:"el-icon-close text-danger"}):e._e(),0!==e.paperAnswer[e.paperQuestions.singleList.length+e.paperQuestions.multipleList.length+n].questionScore?s("i",{staticClass:"el-icon-check text-success"}):e._e()]),s("el-radio-group",{attrs:{disabled:""},model:{value:e.paperAnswer[e.paperQuestions.singleList.length+e.paperQuestions.multipleList.length+n].paperUserAnswer,callback:function(t){e.$set(e.paperAnswer[e.paperQuestions.singleList.length+e.paperQuestions.multipleList.length+n],"paperUserAnswer",t)},expression:"paperAnswer[paperQuestions.singleList.length+paperQuestions.multipleList.length+index].paperUserAnswer"}},[s("el-radio",{attrs:{label:"正确"}},[e._v("正确")]),s("el-radio",{attrs:{label:"错误"}},[e._v("错误")])],1)],1)})],2):e._e(),this.paperQuestions.fillInList.length>0?s("div",{staticClass:"fillIn-questions"},[s("h4",[e._v("填空题")]),e._l(this.paperQuestions.fillInList,function(t,n){return s("div",[s("h5",{staticClass:"fillIn-title"},[e._v(e._s(e.paperQuestions.singleList.length+e.paperQuestions.judgementList.length+e.paperQuestions.multipleList.length+n+1)+"."+e._s(t.question.questionText)),s("span",{staticClass:"ml-2 score"},[e._v(e._s(e.paperAnswer[e.paperQuestions.singleList.length+e.paperQuestions.judgementList.length+e.paperQuestions.multipleList.length+n].questionScore)+"分")]),0===e.paperAnswer[e.paperQuestions.singleList.length+e.paperQuestions.judgementList.length+e.paperQuestions.multipleList.length+n].questionScore?s("i",{staticClass:"el-icon-close text-danger"}):e._e(),0!==e.paperAnswer[e.paperQuestions.singleList.length+e.paperQuestions.judgementList.length+e.paperQuestions.multipleList.length+n].questionScore?s("i",{staticClass:"el-icon-check text-success"}):e._e()]),s("el-input",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:e.paperAnswer[e.paperQuestions.singleList.length+e.paperQuestions.judgementList.length+e.paperQuestions.multipleList.length+n].paperUserAnswer,callback:function(t){e.$set(e.paperAnswer[e.paperQuestions.singleList.length+e.paperQuestions.judgementList.length+e.paperQuestions.multipleList.length+n],"paperUserAnswer",t)},expression:"paperAnswer[paperQuestions.singleList.length+paperQuestions.judgementList.length+paperQuestions.multipleList.length+index].paperUserAnswer"}})],1)})],2):e._e(),this.paperQuestions.subjectiveList.length>0?s("div",{staticClass:"Subjective-questions"},[s("h4",[e._v("主观题")]),e._l(this.paperQuestions.subjectiveList,function(t,n){return s("div",[s("h5",{staticClass:"Subjective-title"},[e._v(e._s(e.paperQuestions.singleList.length+e.paperQuestions.judgementList.length+e.paperQuestions.fillInList.length+e.paperQuestions.multipleList.length+n+1)+"."+e._s(t.question.questionText)),s("span",{staticClass:"ml-2 score"},[e._v(e._s(e.paperAnswer[e.paperQuestions.singleList.length+e.paperQuestions.judgementList.length+e.paperQuestions.fillInList.length+e.paperQuestions.multipleList.length+n].questionScore)+"分")])]),s("el-input",{attrs:{type:"textarea",rows:"4",cols:"45",disabled:""},model:{value:e.paperAnswer[e.paperQuestions.singleList.length+e.paperQuestions.judgementList.length+e.paperQuestions.fillInList.length+e.paperQuestions.multipleList.length+n].paperUserAnswer,callback:function(t){e.$set(e.paperAnswer[e.paperQuestions.singleList.length+e.paperQuestions.judgementList.length+e.paperQuestions.fillInList.length+e.paperQuestions.multipleList.length+n],"paperUserAnswer",t)},expression:"paperAnswer[paperQuestions.singleList.length+paperQuestions.judgementList.length+paperQuestions.fillInList.length+paperQuestions.multipleList.length+index].paperUserAnswer"}}),s("div",{staticClass:"mt-1"},[e._v("请输入分值： "),s("el-input-number",{attrs:{"controls-position":"right",min:0},on:{change:e.handleChange},model:{value:e.paperAnswer[e.paperQuestions.singleList.length+e.paperQuestions.judgementList.length+e.paperQuestions.fillInList.length+e.paperQuestions.multipleList.length+n].questionScore,callback:function(t){e.$set(e.paperAnswer[e.paperQuestions.singleList.length+e.paperQuestions.judgementList.length+e.paperQuestions.fillInList.length+e.paperQuestions.multipleList.length+n],"questionScore",t)},expression:"paperAnswer[paperQuestions.singleList.length+paperQuestions.judgementList.length+paperQuestions.fillInList.length+paperQuestions.multipleList.length+index].questionScore"}})],1)],1)})],2):e._e()])]),s("div",[s("h5",[e._v("评语：")]),s("el-input",{attrs:{type:"textarea",rows:"2",cols:"30"},model:{value:e.form.applicantExamLabel,callback:function(t){e.$set(e.form,"applicantExamLabel",t)},expression:"form.applicantExamLabel"}})],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.correctVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.saveCorrect}},[e._v("确 定")])],1)]),s("el-dialog",{attrs:{title:"提示",visible:e.delVisible,width:"300px",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[s("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.delVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.deleteRow}},[e._v("确 定")])],1)])],1)},a=[],i=s("5d73"),l=s.n(i),r=s("f499"),p=s.n(r),o=(s("28a5"),s("cebc")),c=(s("cadf"),s("551c"),s("097d"),s("2f62")),u={name:"MarkPaper",data:function(){return{pageInfo:{startPage:1,pageSize:5},selectedExam:{},tableData:[],applicantData:[],paperAnswer:[],subjectiveAnswers:[],is_search:!1,editVisible:!1,delVisible:!1,addVisible:!1,correctVisible:!1,form:{applicantExamId:0,applicantExamScore:0,applicantExamLabel:""},idx:-1}},mounted:function(){this.getData()},created:function(){this.getData()},computed:Object(o["a"])({},Object(c["d"])(["examList","userInfo","applicantList","paperQuestions","answerList","selectedApplicantExam"])),methods:Object(o["a"])({},Object(c["b"])(["loadExamByUser","loadApplicantsByExam","loadPaperDetailByExam","loadUserAnswer","updateApplicantAndExam","updateSubjectiveScore"]),Object(c["c"])(["SET_SELECTED_APPLICANTEXAM"]),{splitOption:function(e){return e.split(";")},tableRowClassName:function(e){var t=e.row;e.rowIndex;return 0===t.examStatus?"bg-warning":""},handleCurrentChange:function(e){this.pageInfo.startPage=e,this.getData()},getData:function(){var e=this;this.loadExamByUser({startPage:this.pageInfo.startPage,pageSize:this.pageInfo.pageSize,userId:this.userInfo.userId}).then(function(t){if(t){e.tableData.length=0,e.tableData=e.examList.list;for(var s=0;s<e.tableData.length;s++)0===e.tableData[s].examStatus&&(e.tableData[s].status="冻结"),1===e.tableData[s].examStatus&&(e.tableData[s].status="正常");console.log(e.tableData)}})},toMark:function(e,t){var s=this;this.SET_SELECTED_APPLICANTEXAM(t),this.loadPaperDetailByExam(this.selectedExam.examId).then(function(e){e&&s.loadUserAnswer({examId:s.selectedExam.examId,applicantId:t.applicantId}).then(function(e){e&&(s.init(),s.correctVisible=!0)})})},search:function(){this.is_search=!0},filterTag:function(e,t){return t.tag===e},handleEdit:function(e,t){var s=this;this.selectedExam=t,this.editVisible=!0,this.loadApplicantsByExam({startPage:this.pageInfo.startPage,pageSize:this.pageInfo.pageSize,examId:t.examId}).then(function(e){if(e){s.applicantData.length=0,s.applicantData=s.applicantList.list;for(var t=0;t<s.applicantData.length;t++)0===s.applicantData[t].applicantExamStatus&&(s.applicantData[t].status="未批改"),1===s.applicantData[t].applicantExamStatus&&(s.applicantData[t].status="已批改");console.log(s.applicantData)}})},saveCorrect:function(){var e=this,t=0,s=!0,n=!1,a=void 0;try{for(var i,r=l()(this.paperAnswer);!(s=(i=r.next()).done);s=!0){var o=i.value;t+=o.questionScore}}catch(d){n=!0,a=d}finally{try{s||null==r.return||r.return()}finally{if(n)throw a}}for(var c=this.paperQuestions.singleList.length+this.paperQuestions.judgementList.length+this.paperQuestions.fillInList.length+this.paperQuestions.multipleList.length,u=c;u<this.paperAnswer.length;u++)this.subjectiveAnswers.push(this.paperAnswer[u]);console.log(this.subjectiveAnswers),this.form.applicantExamScore=t,this.updateApplicantAndExam(this.form).then(function(t){t?e.updateSubjectiveScore({paperAnswerArray:p()(e.subjectiveAnswers)}).then(function(t){t?(e.$Message.success("保存成功"),e.form.applicantExamLabel="",e.correctVisible=!1):(e.$Message.error("保存失败"),e.correctVisible=!1)}):(e.$Message.error("保存失败"),e.correctVisible=!1)})},init:function(){this.paperAnswer.length=0,this.paperAnswer=[],this.form.applicantExamId=this.selectedApplicantExam.applicantExamId;var e=!0,t=!1,s=void 0;try{for(var n,a=l()(this.answerList);!(e=(n=a.next()).done);e=!0){var i=n.value;if(2===i.question.typeId){var r={questionId:i.questionId,paperUserAnswer:i.paperUserAnswer.split(";"),applicantExamId:i.applicantExamId,paperAnswerId:i.paperAnswerId,paperAnswerStatus:i.paperAnswerStatus,questionScore:i.questionScore};this.paperAnswer.push(r)}else{var p={questionId:i.questionId,paperUserAnswer:i.paperUserAnswer,applicantExamId:i.applicantExamId,paperAnswerId:i.paperAnswerId,paperAnswerStatus:i.paperAnswerStatus,questionScore:i.questionScore};this.paperAnswer.push(p)}}}catch(o){t=!0,s=o}finally{try{e||null==a.return||a.return()}finally{if(t)throw s}}}})},d=u,g=(s("2694"),s("2877")),h=Object(g["a"])(d,n,a,!1,null,"de9d3364",null);h.options.__file="MarkPaper.vue";t["default"]=h.exports},ce7e:function(e,t,s){var n=s("63b6"),a=s("584a"),i=s("294c");e.exports=function(e,t){var s=(a.Object||{})[e]||Object[e],l={};l[e]=t(s),n(n.S+n.F*i(function(){s(1)}),"Object",l)}},cebc:function(e,t,s){"use strict";var n=s("268f"),a=s.n(n),i=s("e265"),l=s.n(i),r=s("a4bb"),p=s.n(r),o=s("85f2"),c=s.n(o);function u(e,t,s){return t in e?c()(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=p()(s);"function"===typeof l.a&&(n=n.concat(l()(s).filter(function(e){return a()(s,e).enumerable}))),n.forEach(function(t){u(e,t,s[t])})}return e}s.d(t,"a",function(){return d})},e265:function(e,t,s){e.exports=s("ed33")},ed33:function(e,t,s){s("014b"),e.exports=s("584a").Object.getOwnPropertySymbols},f499:function(e,t,s){e.exports=s("a21f")},fde4:function(e,t,s){s("bf90");var n=s("584a").Object;e.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}}}]);